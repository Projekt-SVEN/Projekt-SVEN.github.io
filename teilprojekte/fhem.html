<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Yatra+One&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/css/design.css">
        <link rel="stylesheet" href="/css/nav.css">
        <script src="/scripts/jquery-3.5.1.min.js"></script>
    </head>
    <body>
        <script src="/scripts/loader.js"></script>
        <header></header>

        <article>
            <div class="article_mitte">
                <h1>Installation</h1>
                <ol>
                    <li>Installiere das FHEM-Paket &bdquo;FHEM Tablet UI&ldquo;. (siehe <a href="https://wiki.fhem.de/wiki/FHEM_Tablet_UI">hier</a>)</li>
                    <li>Kopiere den Inhalt des Repositories in das Stammverzeichnis von FHEM.</li>
                    <li>F&uuml;hre die Perlfunktion <code>Sven_init()</code> in FHEM aus.</li>
                </ol>
                <br/><br/>
                <h1>Automatisierung</h1>
                Die grafische Nutzeroberfl&auml;che wurde f&uuml;r ein im jeweiligen Raum befindliches Tablet konzipiert. Das Interface ist dabei &uuml;ber eine Webschnittstelle erreichbar, damit ein beliebiges Tablet ohne zus&auml;tzliche Software verwendet werden kann. Es wurde sich f&uuml;r eine raumzentrale M&ouml;glichkeit entschieden, da ein allgemein erreichbares Webinterface daf&uuml;r sorgen k&ouml;nnte, dass Studierende die Heizungstemperatur andauernd &auml;ndern, um die eigenen Pr&auml;ferenzen durchzusetzen. Der Betrieb der Weboberfl&auml;che sollte dabei in einem &bdquo;Kiosk-Browser&ldquo; erfolgen, welcher lediglich den Betrieb vordefinierter Webseiten erlaubt. Somit kann die Steuerung eines anderen Raumes nicht aufgerufen werden. Die Verwendungsm&ouml;glichkeiten der Schnittstelle lassen sich dabei im Wesentlichen in vier Bereiche einteilen: das Informieren des Nutzers &uuml;ber das System, Steuerung der Systemkomponenten, Anzeigen des Energieverbrauchs und die Eingabe von Feedback. Die einzelnen Elemente der Oberfl&auml;che sollten somit nach diesen Bereichen gruppiert werden. Steuerungsm&ouml;glichkeiten umfassen dabei die Heizung und die Fenster. Dabei ist zu beachten, dass ein Sto&szlig;l&uuml;ften des Raumes wesentlich effektiver ist und somit nur alle Fenster auf einmal ge&ouml;ffnet oder geschlossen werden k&ouml;nnen. Bei der Auswertung werden dem Nutzer Graphen mit den folgenden Kurven geboten: Energieverbrauch mit sowie ohne den Einsatz von &bdquo;SVEN&bdquo; und die ermittelte Energieersparnis in Kilowattstunden. Zuletzt wird die Ersparnis bei den Energiekosten ausgerechnet und angezeigt. Mittels des Feedbackmen&uuml;s erhalten Veranstaltungsteilnehmer die M&ouml;glichkeit, ihre Ansichten zum Raumklima zu &auml;u&szlig;ern. Dabei werden sechs Fragestellungen angeboten, welche schnell mittels vordefinierter Antwortm&ouml;glichkeiten beantwortet k&ouml;nnen. Dies soll Studierenden erm&ouml;glichen, auch w&auml;hrend der 15-min&uuml;tigen Pausen zum Raumwechsel ein Feedback abgeben zu k&ouml;nnen. 
                <br/><br/>
                F&uuml;r das Nutzerinterface wurde das Framework &bdquo;FHEM Tablet UI&ldquo; verwendet. Die Verwendung eines vorhandenen Frameworks ersparte viel Zeit bei der Implementierung. Eine Installation des Frameworks erfolgt in simplen Schritten, wie im detailreichen Wiki-Artikel nachgelesen werden kann. Das Framework erm&ouml;glicht es, in FHEM integrierte Ger&auml;te zu steuern und ihren Status anzeigen zu lassen. Geliefert werden diverse       HTML-, CSS- und JavaScript-Dateien, welche nach Belieben angepasst werden k&ouml;nnen. 
                <br/><br/>
                Die Konfiguration grafischer Elemente erfolgt mit einer Vielzahl vordefinierter Widgets, welche in HTML-Dateien eingebunden werden. Zur Realisierung der Nutzeroberfl&auml;che wurden die folgenden Dateien implementiert: index.html, menu.html, uebersicht.html, auswertung.html, info.html und feedback.html. Die letzten f&uuml;nf Dateien werden dabei f&uuml;r jeden Raum spezifisch generiert, um eine Unterscheidung zwischen den Ger&auml;ten der einzelnen R&auml;ume zu erm&ouml;glichen. Jede Datei integriert dabei ihr jeweiliges Men&uuml; an den linken Rand der Oberfl&auml;che. Es ist auch zu beachten, dass das Layout jeder Datei in x-Richtung f&uuml;nf Bl&ouml;cke und in y-Richtung zwei Bl&ouml;cke gro&szlig; ist, damit die einzelnen Abschnitte m&ouml;glichst gleichm&auml;&szlig;ig aussehen. Da sich in der Auswertungsanzeige drei Elemente untereinander befinden anstelle von zwei, wurde hier die y-Gr&ouml;&szlig;e auf sechs Bl&ouml;cke gesetzt. Bilder der entsprechenden Seiten k&ouml;nnen im Anhang betrachtet werden. 
                <br/><br/>
                <h2>Index.html</h2>
                
                Der Einstieg in die Nutzeroberfl&auml;che erfolgt standardm&auml;&szlig;ig &uuml;ber die index.html-Datei. Diese wurde verwendet, um dem Nutzer die Auswahl eines Raumes zu erm&ouml;glichen. Die einzelnen Elemente werden dabei bestehend aus einem Pagetab, welcher die Verkn&uuml;pfung zu einer anderen Datei realisiert und die aktuell geladene Datei durch diese austauscht, sowie einem Label zur Beschriftung in jeweils eine eigene Reihe des Layouts eingef&uuml;gt. Es wurde ein Label verwendet, da die Schriftgr&ouml;&szlig;e der Pagetab-Beschriftung nicht angepasst werden kann. Das Ausw&auml;hlen eines Raumes l&auml;dt die jeweilige uebersicht.html-Datei des Raumes. Um die Verwendung des Nutzerinterfaces auf mobilen Endger&auml;ten zu gestatten, wurden zwei meta-Tags eingef&uuml;gt. In den einzelnen Dateien wurde das Gridster-Layout angewendet. Die einzelnen Elemente dieses Layouts k&ouml;nnen ohne das Meta-Tag &bdquo;gridster_disable&ldquo; flexibel verschoben werden. Damit dies nicht m&ouml;glich ist, wurde das Meta-Tag eingef&uuml;gt. Beim Bedienen der Elemente werden dem Nutzer Toast-Nachrichten angezeigt. Diese wurden durch das Meta-Tag &bdquo;toast content=&apos;0&apos; &ldquo; unterbunden, um den Nutzer mit den angezeigten FHEM-Befehlen nicht zu verwirren. Zuletzt verf&uuml;gt die Datei noch &uuml;ber eine JavaScript-Funktion zum Ermitteln der Raumbezeichnung aus dem Link und einer Funktion, welche das Feedback des Nutzers aus den im Feedback-Tab befindlichen Selektoren ausliest und an die Datenbank mittels eines XML-Http-Requests zur Verarbeitung weitergibt.  
                <br/><br/>
                <h2>Menu.html</h2>
                
                Das Men&uuml; dient als Verkn&uuml;pfung der einzelnen anderen Dateien, um zwischen diesen hin- und herwechseln zu k&ouml;nnen. Auch hier werden Pagetabs zur Navigation angewendet. Unter den Men&uuml;punkten wird das Logo eingebunden. Das Men&uuml; selbst wird in jeder Seite als Template geladen.  
                <br/><br/>
                <h2>Uebersicht.html</h2>
                <img src="/img/Uebersicht.jpeg"/>
                <br/><br/>
                Diese Datei ist die erste, welche nach der Raumauswahl aufgerufen wird. Mittels dieser Seite werden die Steuerungsm&ouml;glichkeiten und Graphen zur zeitlichen Raumnutzung, &Ouml;ffnungszeitr&auml;ume der Fenster, Raumtemperatur und Thermostateinstellung angezeigt. Die Steuerung der Heizung wird dabei &uuml;ber einen Spinner realisiert, welcher die Solltemperatur im Temperaturmanager setzt und zur Anzeige ausliest. Das Setzen der Temperatur wurde dabei auf maximal 23Â°C beschr&auml;nkt, da dies f&uuml;r ausreichend befunden wurde und eine h&ouml;here Temperatur mehrheitlich als unangenehm empfunden wird. Hierbei ist zu beachten, dass bei einem Umstellen der Temperatur das Umsetzen durch das Funkthermostat oftmals etliche Sekunden dauert und das Spinner-Element w&auml;hrenddessen noch den alten Status ausliest und anzeigt. Der Status des Heizungsventils wird ebenfalls visualisiert. In der darunter befindlichen Reihe wird der Status der Fenster mittels eines Switches visualisiert, welcher die Eigenschaft readonly hat. Das bedeutet, dass dieses Element lediglich zur Anzeige dient. Darunter befindlich kann die Fenstersteuerung genutzt werden, welche dem Fenstermanager entsprechende Befehle erteilt.  Abschlie&szlig;end wird die n&auml;chste planm&auml;&szlig;ige L&uuml;ftung des Raumes angezeigt. Auf der rechten Seite befinden sich die angesprochenen Grafen, welche die zu visualisierenden Daten aus den Log-Dateien der jeweiligen Manager auslesen. Zu beachten ist dabei, dass die boolschen Werte offen/geschlossen der Fenster und benutzt/leer der Raumnutzung f&uuml;r den Graphen in numerische Werte konvertiert werden m&uuml;ssen. Hierf&uuml;r ist es von N&ouml;ten, in der Funktion anzugeben, in welcher Spalte des Logs der Wert zu finden ist. Mit dem Z&auml;hlen muss dabei bei eins begonnen werden. &Uuml;ber die field-Funktion, welche dagegen bei null mit dem Z&auml;hlen beginnt, k&ouml;nnen den boolschen Werten die gew&uuml;nschten numerischen zugewiesen werden. 
                <br/><br/>
                
                <h2>Auswertung.html</h2>
                <img src="/img/auswertung.jpeg"/>
                <br/><br/>
                Mittels dieser Seite werden die Energieverbrauchswerte visualisiert. Hierbei stehen drei verschiedene Zeitabst&auml;nde zur Verf&uuml;gung. Es wird der Verbrauch des aktuellen Tages, der aktuellen Woche und des aktuellen Monats betrachtet werden. Dies wird &uuml;ber die Tags days-ago_start und days-ago_end festgelegt. Durch die oberen Buttons kann zwischen einzelnen Tagen navigiert werden, um zwischen diesen vergleichen zu k&ouml;nnen. Die Entscheidung fiel auf eine Variante mit drei einzelnen Diagrammen, da der Versuch mit JavaScript, die einzelnen Attribute eines Graphen beim Klicken einer Combobox zu &auml;ndern oder die Sichtbarkeit einzelner Graphen anzupassen, zu diversen nicht l&ouml;sbaren Problemen f&uuml;hrte. &Uuml;ber ein label-Element wird abschlie&szlig;end ausgerechnet, wie viel Geld durch den Einsatz von &bdquo;SVEN&ldquo; im aktuellen Monat gespart werden konnte. 
                <br/><br/>
                <h2>Info.html</h2>
                <img src="/img/info.jpeg"/>
                <br/><br/>
                Im Info-Tab wird der Nutzer mittels eines Textes in einem einzelnen Label aufgekl&auml;rt, was der Name &bdquo;SVEN&ldquo; bedeutet und welche M&ouml;glichkeiten ihm durch die grafische Nutzeroberfl&auml;che geboten werden. 
                <br/><br/>
                <h2>Feedback.html</h2>
                <img src="/img/feedback.jpeg"/>
                <br/><br/>
                Um das Feedback der Nutzer einzuholen, werden dem Nutzer mittels label-Elementen sechs Fragen zum Raumklima angezeigt. Neben jeder Frage befindet sich ein select-Element mit entsprechenden vorgegebenen Antwortm&ouml;glichkeiten. &Uuml;ber den unten befindlichen Button kann das Feedback abgesendet werden. Dieser l&ouml;st die sendData-Funktion der index.html-Datei aus. 
            </div>
        </article>

        <footer></footer>
    </body>
</html>